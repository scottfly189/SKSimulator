<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>&#128073; å¿«é€Ÿå¼€å§‹ | SKSimulatoré”®é¼ æ¨¡æ‹Ÿå™¨ </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="&#128073; å¿«é€Ÿå¼€å§‹ | SKSimulatoré”®é¼ æ¨¡æ‹Ÿå™¨ ">
      
      
      <link rel="icon" href="../favicon.ico">
      <link rel="stylesheet" href="../public/docfx.min.css">
      <link rel="stylesheet" href="../public/main.css">
      <meta name="docfx:navrel" content="../toc.html">
      <meta name="docfx:tocrel" content="../toc.html">
      
      <meta name="docfx:rel" content="../">
      
      
      
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./../public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="../index.html">
            <img id="logo" class="svg" src="../logo.svg" alt="SKSimulatoré”®é¼ æ¨¡æ‹Ÿå™¨">
            SKSimulatoré”®é¼ æ¨¡æ‹Ÿå™¨
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="-å¿«é€Ÿå¼€å§‹">ğŸ‘‰ å¿«é€Ÿå¼€å§‹</h1>

<hr>
<br>
<h2 id="-å‰ç½®æ¡ä»¶">ğŸˆ å‰ç½®æ¡ä»¶</h2>
<ul>
<li>æœ¬SDKåŸºäºWindowsçš„UI Automationå¼€å‘ï¼Œæ‰€ä»¥ä»…æ”¯æŒWindows æ“ä½œç³»ç»Ÿï¼Œå¹¶ä¸”éœ€è¦å°†é¡¹ç›®çš„<code>TargetFramework</code>ä¿®æ”¹æˆ:ç›®æ ‡æ¡†æ¶-windows,å¦‚ä½ åœ¨.net8ä¸‹ä½¿ç”¨ï¼Œè¯·å°†<code>TargetFramework</code>ä¿®æ”¹æˆ<code>net8.0-windows</code>;</li>
<li>.NET Framework 4.8+ æˆ– .NET 6.0+ (Windows)ï¼Œæ”¯æŒ.NETçš„æ¡†æ¶æœ‰:net48;net481;net6.0-windows; net7.0-windows;net8.0-windows;net9.0-windows;net10.0-windows;</li>
<li>å¾®ä¿¡ PC å®¢æˆ·ç«¯å·²å®‰è£…å¹¶è¿è¡Œ,æœ¬ SDK åŸºäºå¾®ä¿¡ PC å®¢æˆ·ç«¯(ç‰ˆæœ¬å·:3.9.12.55)çš„ UI ç»“æ„å¼€å‘ï¼Œä¸åŒç‰ˆæœ¬å¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚</li>
</ul>
<h2 id="-å®‰è£…">ğŸ‰ å®‰è£…</h2>
<p>é€šè¿‡ NuGet å®‰è£…ï¼š</p>
<pre><code class="lang-bash">dotnet add package WeChatAuto.SDK
</code></pre>
<h2 id="-wechatautosdkçš„åˆå§‹åŒ–">ğŸ‰ WeChatAuto.SDKçš„åˆå§‹åŒ–</h2>
<p>WeChatAuto.SDKçš„åˆå§‹åŒ–çš„é€šç”¨æ ¼å¼ä¸º:</p>
<pre><code>WeAutomation.Initialize(...,Action&lt;WeChatConfig&gt; options)
</code></pre>
<p>ä½†æ ¹æ®åº”ç”¨ä¾èµ–æ³¨å…¥å¼•å…¥çš„æƒ…å†µåˆ†ä¸¤ç§æƒ…å†µï¼š</p>
<ul>
<li>åº”ç”¨æ²¡æœ‰å¯ç”¨ä¾èµ–æ³¨å…¥</li>
</ul>
<p>æ­¤ç§æƒ…å†µéœ€è¦è‡ªè¡Œå¼•å…¥<code>dotnet add package Microsoft.Extensions.DependencyInjection</code>åŒ…,è¿™æ ·åº”ç”¨ä¹Ÿæœ‰äº†ä¾èµ–æ³¨å…¥å®¹å™¨,å¹¶ä¸”æ ¹æ®æƒ…å†µåˆå§‹åŒ–WeChatConfigé…ç½®å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="lang-csharp">// åˆå§‹åŒ–WeAutomationæœåŠ¡
var serviceProvider = WeAutomation.Initialize(options =&gt;
{
    options.DebugMode = true;   //å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè°ƒè¯•æ¨¡å¼ä¼šåœ¨è·å¾—ç„¦ç‚¹æ—¶è¾¹æ¡†é«˜äº®ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­
    //options.EnableRecordVideo = true;  //å¼€å¯å½•åˆ¶è§†é¢‘åŠŸèƒ½ï¼Œå½•åˆ¶çš„è§†é¢‘ä¼šä¿å­˜åœ¨é¡¹ç›®çš„è¿è¡Œç›®å½•ä¸‹çš„Videosæ–‡ä»¶å¤¹ä¸­
});

using var clientFactory = serviceProvider.GetRequiredService&lt;WeChatClientFactory&gt;();
...ä¸‹é¢æ˜¯æ›´å¤šä»£ç 

</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šå¦‚æœåº”ç”¨æ²¡æœ‰å¯ç”¨ä¾èµ–æ³¨å…¥ï¼ŒclientFactoryçš„ç”Ÿå‘½å‘¨æœŸéœ€è¦è‡ªè¡Œè´Ÿè´£ï¼Œæˆ–è€…åº”ç”¨é€€å‡ºçš„æ—¶å€™æ˜¾å¼<code>clientFactory.Dispose()</code>,æˆ–è€…å°†clientFactoryæ”¾å…¥<code>using {}</code>ä»£ç å—ä¸­è‡ªåŠ¨é‡Šæ”¾</p>
</blockquote>
<ul>
<li>åº”ç”¨å¯ç”¨äº†ä¾èµ–æ³¨å…¥æ¡†æ¶</li>
</ul>
<p>æ­¤ç§æƒ…å†µï¼Œéœ€è¦åœ¨åº”ç”¨Services.BuildServiceProvider()å‰è¿›è¡Œåˆå§‹åŒ–,å¹¶å°†åº”ç”¨çš„Servicesåšä¸ºåˆå§‹åŒ–çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè¿™æ ·æœ¬SDKå°±é›†æˆåœ¨åº”ç”¨çš„ä¾èµ–æ³¨å…¥æ¡†æ¶ä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p>
<pre><code class="lang-csharp">using Microsoft.Extensions.Hosting;
using WeChatAuto.Services;
using WeChatAuto.Components;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Logging;

var builder = Host.CreateApplicationBuilder(args);

WeAutomation.Initialize(builder.Services, options =&gt;
{
    //å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè°ƒè¯•æ¨¡å¼ä¼šåœ¨è·å¾—ç„¦ç‚¹æ—¶è¾¹æ¡†é«˜äº®ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­
    options.DebugMode = true;
    //å¼€å¯å½•åˆ¶è§†é¢‘åŠŸèƒ½ï¼Œå½•åˆ¶çš„è§†é¢‘ä¼šä¿å­˜åœ¨é¡¹ç›®çš„è¿è¡Œç›®å½•ä¸‹çš„Videosæ–‡ä»¶å¤¹ä¸­
    //options.EnableRecordVideo = true;  
});

//è¿™é‡Œæ³¨å…¥è‡ªå·²çš„æœåŠ¡ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰ï¼Œå¦‚LLMæœåŠ¡ç­‰
builder.Services.AddSingleton&lt;LLMService&gt;();

var serviceProvider = builder.Services.BuildServiceProvider();
var clientFactory = serviceProvider.GetRequiredService&lt;WeChatClientFactory&gt;();
...æ›´å¤šä»£ç 
await builder.Build().RunAsync();
...
</code></pre>
<blockquote>
<p>æ­¤ç§æ–¹å¼çš„åˆå§‹åŒ–æ— é¡»ç®¡ç†clientFactoryçš„ç”Ÿå‘½å‘¨æœŸ</p>
</blockquote>
<h2 id="-åŸºæœ¬ä½¿ç”¨">ğŸ˜Š åŸºæœ¬ä½¿ç”¨</h2>
<h3 id="ç¤ºä¾‹ä¸€-ç»™å¥½å‹æˆ–ç¾¤èŠæ˜µç§°å‘é€æ¶ˆæ¯">ç¤ºä¾‹ä¸€: ç»™å¥½å‹ï¼ˆæˆ–ç¾¤èŠæ˜µç§°ï¼‰å‘é€æ¶ˆæ¯ï¼š</h3>
<blockquote>
<p>æºç è¯·å‚è§: <code>é¡¹ç›®æ ¹ç›®å½•\Examples\demo01</code></p>
</blockquote>
<ul>
<li>æ­¥éª¤ä¸€ï¼šæ–°å»ºé¡¹ç›®ï¼Œå¦‚ä¸‹æ‰€ç¤º:</li>
</ul>
<pre><code>dotnet new console -n demo01
</code></pre>
<ul>
<li>æ­¥éª¤äºŒï¼šå°†demo01.csprojé¡¹ç›®æ–‡ä»¶çš„net10.0<strong>ä¿®æ”¹</strong>æˆnet10.0-windows,å¦‚ä¸‹æ‰€ç¤º:</li>
</ul>
<pre><code>  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;net10.0-windows&lt;/TargetFramework&gt;
    &lt;ImplicitUsings&gt;enable&lt;/ImplicitUsings&gt;
    &lt;Nullable&gt;enable&lt;/Nullable&gt;
  &lt;/PropertyGroup&gt;
</code></pre>
<ul>
<li>æ­¥éª¤ä¸‰ï¼šå®‰è£…ä¾èµ–</li>
</ul>
<pre><code>dotnet add package WeChatAuto.SDK
dotnet add package Microsoft.Extensions.DependencyInjection
</code></pre>
<ul>
<li>æ­¥éª¤å››ï¼šé¡¹ç›®demo01çš„Program.csä¿®æ”¹æˆå¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="lang-csharp">using Microsoft.Extensions.DependencyInjection;
using WeChatAuto.Components;
using WeChatAuto.Services;

// åˆå§‹åŒ–WeAutomationæœåŠ¡
var serviceProvider = WeAutomation.Initialize(options =&gt;
{
    options.DebugMode = true;   //å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè°ƒè¯•æ¨¡å¼ä¼šåœ¨è·å¾—ç„¦ç‚¹æ—¶è¾¹æ¡†é«˜äº®ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­
    //options.EnableRecordVideo = true;  //å¼€å¯å½•åˆ¶è§†é¢‘åŠŸèƒ½ï¼Œå½•åˆ¶çš„è§†é¢‘ä¼šä¿å­˜åœ¨é¡¹ç›®çš„è¿è¡Œç›®å½•ä¸‹çš„Videosæ–‡ä»¶å¤¹ä¸­
});

using var clientFactory = serviceProvider.GetRequiredService&lt;WeChatClientFactory&gt;();
Console.WriteLine($&quot;å½“å‰å®¢æˆ·ç«¯æ‰“å¼€çš„å¾®ä¿¡å®¢æˆ·ç«¯ä¸ºï¼š{string.Join(&quot;,&quot;, clientFactory.GetWeChatClientNames())}ï¼Œå…±è®¡{clientFactory.GetWeChatClientNames().Count}ä¸ªå¾®ä¿¡å®¢æˆ·ç«¯ã€‚&quot;);
//è·å–å½“å‰æ‰“å¼€çš„å¾®ä¿¡å®¢æˆ·ç«¯åç§°åˆ—è¡¨
var clientNames = clientFactory.GetWeChatClientNames();    
//è·å–ç¬¬ä¸€ä¸ªå¾®ä¿¡å®¢æˆ·ç«¯
var wxClient = clientFactory.GetWeChatClient(clientNames.First());  
 //é€šè¿‡å¾®ä¿¡å®¢æˆ·ç«¯å‘é€æ¶ˆæ¯ç»™å¥½å‹æ˜µç§°AI.Netï¼Œæµ‹è¯•æ—¶è¯·æŠŠAI.Netä¿®æ”¹æˆè‡ªå·±çš„å¥½å‹æ˜µç§°
wxClient?.SendWho(&quot;AI.Net&quot;,&quot;ä½ å¥½ï¼Œæ¬¢è¿ä½¿ç”¨AI.Netå¾®ä¿¡è‡ªåŠ¨åŒ–æ¡†æ¶ï¼&quot;); 
</code></pre>
<blockquote>
<p><strong>æ³¨æ„</strong>ï¼š</p>
<ol>
<li>æœ¬é¡¹ç›®ä»…æ”¯æŒ Windows ç³»ç»Ÿï¼Œè¯·åŠ¡å¿…å°†é¡¹ç›®æ–‡ä»¶çš„ TargetFramework è®¾ç½®ä¸º netxx.0-windowsï¼ˆå¦‚ net10.0-windowsï¼‰ï¼Œå¦åˆ™ç¼–è¯‘æ—¶ä¼šå‡ºç°è­¦å‘Šã€‚åç»­ä¸å†èµ˜è¿°ã€‚</li>
<li>å¦‚æœæ˜¯æ‰‹åŠ¨ç®¡ç†WeChatClientFactory,è¯·åœ¨åº”ç”¨ç»“æŸæ—¶è¿è¡ŒclientFactory.Dispose(),æˆ–è€…åƒç¤ºä¾‹ä»£ç ä¸€æ ·å°†ä»£ç æ”¾å…¥usingå—è‡ªåŠ¨é‡Šæ”¾,å¦‚æœæŠŠWeChatAuto.SDKåŠ å…¥æ‚¨çš„ä¾èµ–æ³¨å…¥å®¹å™¨ï¼Œåˆ™ä¸å­˜åœ¨æ­¤é—®é¢˜ã€‚</li>
<li>WeAutomation.Initialize()æ–¹æ³•æœ‰ä¸¤ä¸ªé‡è½½ï¼Œåˆ†åˆ«é€‚ç”¨äºï¼šåŠ å…¥å¤–éƒ¨ä¾èµ–æ³¨å…¥ä¸ä½¿ç”¨å†…éƒ¨ä¾èµ–æ³¨å…¥ã€‚</li>
</ol>
</blockquote>
<h3 id="ç¤ºä¾‹äºŒ---æ¼”ç¤ºç›‘å¬å¥½å‹æˆ–è€…ç¾¤èŠæ˜µç§°çš„æ¶ˆæ¯ä½¿ç”¨æ¶ˆæ¯ä¸Šä¸‹æ–‡è·å–æ¶ˆæ¯å¹¶å›å¤å¹¶ä¸”è¿˜æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥è·å–æ¶ˆæ¯ä¸Šä¸‹æ–‡çš„æ³¨å…¥å¯¹è±¡æ‰§è¡Œè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘">ç¤ºä¾‹äºŒ - æ¼”ç¤ºç›‘å¬å¥½å‹ï¼ˆæˆ–è€…ç¾¤èŠæ˜µç§°ï¼‰çš„æ¶ˆæ¯,ä½¿ç”¨æ¶ˆæ¯ä¸Šä¸‹æ–‡è·å–æ¶ˆæ¯å¹¶å›å¤,å¹¶ä¸”è¿˜æ¼”ç¤ºäº†å¦‚ä½•é€šè¿‡ä¾èµ–æ³¨å…¥è·å–æ¶ˆæ¯ä¸Šä¸‹æ–‡çš„æ³¨å…¥å¯¹è±¡,æ‰§è¡Œè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘ï¼š</h3>
<blockquote>
<p>æºç è¯·å‚è§: <code>é¡¹ç›®æ ¹ç›®å½•\Examples\demo02</code></p>
</blockquote>
<ul>
<li>å‰ç½®æ­¥éª¤ï¼šå®‰è£…ä¾èµ–</li>
</ul>
<pre><code>dotnet add package WeChatAuto.SDK
dotnet add package Microsoft.Extensions.Hosting
</code></pre>
<ul>
<li>å°†é¡¹ç›®demo02çš„Program.csä¿®æ”¹æˆå¦‚ä¸‹</li>
</ul>
<pre><code class="lang-csharp">using Microsoft.Extensions.Hosting;
using WeChatAuto.Services;
using WeChatAuto.Components;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Logging;

var builder = Host.CreateApplicationBuilder(args);

WeAutomation.Initialize(builder.Services, options =&gt;
{
    //å¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œè°ƒè¯•æ¨¡å¼ä¼šåœ¨è·å¾—ç„¦ç‚¹æ—¶è¾¹æ¡†é«˜äº®ï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­
    options.DebugMode = true;
    //å¼€å¯å½•åˆ¶è§†é¢‘åŠŸèƒ½ï¼Œå½•åˆ¶çš„è§†é¢‘ä¼šä¿å­˜åœ¨é¡¹ç›®çš„è¿è¡Œç›®å½•ä¸‹çš„Videosæ–‡ä»¶å¤¹ä¸­
    //options.EnableRecordVideo = true;  
});

//è¿™é‡Œæ³¨å…¥è‡ªå·²çš„æœåŠ¡ï¼ˆæˆ–è€…å¯¹è±¡ï¼‰ï¼Œå¦‚LLMæœåŠ¡ç­‰
builder.Services.AddSingleton&lt;LLMService&gt;();

var serviceProvider = builder.Services.BuildServiceProvider();
var clientFactory = serviceProvider.GetRequiredService&lt;WeChatClientFactory&gt;();
// å¾—åˆ°åç§°ä¸º&quot;Alex&quot;çš„å¾®ä¿¡å®¢æˆ·ç«¯å®ä¾‹ï¼Œæµ‹è¯•æ—¶è¯·å°†AI.netæ›¿æ¢ä¸ºä½ è‡ªå·±çš„å¾®ä¿¡æ˜µç§°
var client = clientFactory.GetWeChatClient(&quot;Alex&quot;);
// ç›‘å¬å¾®ä¿¡ç¾¤æµ‹è¯•11
await client.AddMessageListener(&quot;æµ‹è¯•11&quot;, (messageContext) =&gt;
{
    var index = 0;
    //æ‰“å°æ”¶åˆ°æœ€æ–°æ¶ˆæ¯
    foreach (var message in messageContext.NewMessages)
    {
        index++;
        Console.WriteLine($&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š{index}ï¼š{message.ToString()}&quot;);
        Console.WriteLine($&quot;æ”¶åˆ°æ¶ˆæ¯ï¼š{index}ï¼š{message.Who}ï¼š{message.MessageContent}&quot;);
    }
    //æ‰“å°æ”¶åˆ°æ‰€æœ‰æ¶ˆæ¯çš„ååæ¡
    var allMessages = messageContext.AllMessages.Skip(messageContext.AllMessages.Count - 10).ToList();
    index = 0;
    foreach (var message in allMessages)
    {
        index++;
        Console.WriteLine($&quot;...æ”¶åˆ°æ‰€æœ‰æ¶ˆæ¯çš„å10æ¡ä¹‹ç¬¬{index}æ¡ï¼š{message.Who}ï¼š{message.MessageContent}&quot;);
        Console.WriteLine($&quot;.................è¯¦ç»†ä¹‹ç¬¬{index}æ¡ï¼š{message.ToString()}&quot;);
    }
    //æ˜¯å¦æœ‰äºº@æˆ‘
    if (messageContext.IsBeAt())
    {
        var messageBubble = messageContext.MessageBubbleIsBeAt().FirstOrDefault();
        if (messageBubble != null)
        {
            messageContext.SendMessage(&quot;æˆ‘è¢«@äº†ï¼ï¼ï¼ï¼æˆ‘é©¬ä¸Šå°±å›å¤ä½ ï¼ï¼ï¼ï¼&quot;, new List&lt;string&gt; { messageBubble.Who });
        }
        else
        {
            messageContext.SendMessage(&quot;æˆ‘è¢«@äº†ï¼ï¼ï¼ï¼æˆ‘é©¬ä¸Šå°±å›å¤ä½ ï¼ï¼ï¼ï¼&quot;);
        }
    }
    //æ˜¯å¦æœ‰äººå¼•ç”¨äº†æˆ‘çš„æ¶ˆæ¯
    if (messageContext.IsBeReferenced())
    {
        messageContext.SendMessage(&quot;æˆ‘è¢«å¼•ç”¨äº†ï¼ï¼ï¼ï¼&quot;);
    }
    //æ˜¯å¦æœ‰äººæ‹äº†æ‹æˆ‘
    if (messageContext.IsBeTap())
    {
        messageContext.SendMessage(&quot;æˆ‘è¢«æ‹ä¸€æ‹äº†[å¾®ç¬‘]ï¼ï¼ï¼ï¼&quot;);
    }
    if (!messageContext.IsBeAt() &amp;&amp; !messageContext.IsBeReferenced() &amp;&amp; !messageContext.IsBeTap())
    {
        //å›å¤æ¶ˆæ¯ï¼Œè¿™é‡Œå¯ä»¥å¼•å…¥å¤§æ¨¡å‹è‡ªåŠ¨å›å¤
        messageContext.SendMessage($&quot;æˆ‘æ”¶åˆ°äº†{messageContext.NewMessages.FirstOrDefault()?.Who}çš„æ¶ˆæ¯ï¼š{messageContext.NewMessages.FirstOrDefault()?.MessageContent}&quot;);
    }
    //å¯ä»¥é€šè¿‡æ³¨å…¥çš„æœåŠ¡å®¹å™¨è·å–ä½ æ³¨å…¥çš„æœåŠ¡å®ä¾‹ï¼Œç„¶åè°ƒç”¨ä½ çš„ä¸šåŠ¡é€»è¾‘,ä¸€èˆ¬éƒ½æ˜¯LLMçš„è‡ªåŠ¨å›å¤é€»è¾‘
    var llmService = messageContext.ServiceProvider.GetRequiredService&lt;LLMService&gt;();
    llmService.DoSomething();
});


var app = builder.Build();
await app.RunAsync();

/// &lt;summary&gt;
/// ä¸€ä¸ªåŒ…å«LLMæœåŠ¡çš„Serviceç±»ï¼Œç”¨äºæ³¨å…¥åˆ°MessageContextä¸­
/// &lt;/summary&gt;
public class LLMService
{
    private ILogger&lt;LLMService&gt; _logger;
    public LLMService(ILogger&lt;LLMService&gt; logger)
    {
        _logger = logger;
    }
    public void DoSomething()
    {
        _logger.LogInformation(&quot;è¿™é‡Œæ˜¯ä½ æ³¨å…¥çš„æœåŠ¡å®ä¾‹ï¼Œå¯ä»¥åœ¨è¿™é‡Œç¼–å†™ä½ çš„ä¸šåŠ¡é€»è¾‘  &quot;);
    }
}
</code></pre>
<blockquote>
<p>å‰ç½®æ­¥éª¤è·ŸDemo01ä¸€è‡´,å¯ä»¥é€šè¿‡messageContextå¯¹è±¡æ‰§è¡Œå„ç§æ“ä½œ,ä¹Ÿå¯ä»¥é€šè¿‡messageContextå¯¹è±¡è·å¾—ä¾èµ–æ³¨å…¥å®¹å™¨ï¼Œè·å–è‡ªå·±çš„å¯¹è±¡ï¼Œæ‰§è¡Œè‡ªå·±çš„ä¸šåŠ¡é€»è¾‘;</p>
</blockquote>
<h3 id="ç¤ºä¾‹ä¸‰---mcp-serverçš„ä½¿ç”¨---ä»¥vscodeä¸ºä¾‹è®²è§£">ç¤ºä¾‹ä¸‰ - MCP Serverçš„ä½¿ç”¨ - ä»¥vscodeä¸ºä¾‹è®²è§£</h3>
<ul>
<li>è¿›å…¥æºç çš„.vscode\mcp.json,ä¿®æ”¹é…ç½®å¦‚ä¸‹:</li>
</ul>
<pre><code>{
	&quot;servers&quot;: {
		&quot;wechat_mcp_server&quot;: {
			&quot;type&quot;: &quot;stdio&quot;,
			&quot;command&quot;: &quot;dotnet&quot;,
			&quot;args&quot;: [
				&quot;run&quot;,
                &quot;--project&quot;,
                &quot;æ”¹æˆä½ çš„WeChatAuto.MCP.csprojçš„è·¯å¾„&quot;
			]
		}
	}
}
</code></pre>
<ul>
<li>åœ¨mcp.jsoné¡µé¢ç‚¹å‡»&quot;Start&quot;æŒ‰é’®å¯åŠ¨mcp server</li>
<li>å¯åŠ¨GitHub Copilot Chat,åœ¨Chaté¡µæé—®: è¯·å¸®æˆ‘ç»™å¾®ä¿¡å¥½å‹:AI.Netå‘é€æ¶ˆæ¯ï¼šHello world!</li>
</ul>

</article>

        <div class="contribution d-print-none">
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://github.com/scottfly189/SKSimulator.git">SKSimulator</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
